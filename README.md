# 轻创图文 LightCreate Graphic（微信小程序雏形）

本项目为“轻创图文”小程序的最小可用雏形（MVP）。目标是打通核心流程：场景/模板 → 轻量编辑 → 导出分享。

## 运行方式
- 使用微信开发者工具（建议 1.06+），导入本项目根目录。
- `project.config.json` 中使用 `touristappid`，可直接预览运行；上线前请替换为真实 AppID。
- 推荐开启“ES6 转 ES5”“增强编译”。

### 可选：启用 Supabase 云端数据
1. 在根目录复制 `config.example.js` 为 `config.js`，填写你的 `SUPABASE_URL` 与 `SUPABASE_ANON_KEY`，并将 `ENABLE_SUPABASE` 设为 `true`。
2. 在 Supabase SQL Editor 执行 `db/supabase.sql` 建表与策略（脚本包含 `pgcrypto` 扩展、RLS 与示例模板）。
3. 建议在 Storage 中创建 `lcg-previews` bucket 并设为 public（若修改名称，请同步到 `config.js`）。
4. 运行后：
   - 首页/模板：若云端有 `templates` 数据，将优先从云端展示。
   - 编辑器导出：会将作品结构 `work_data` 以 `client_uid` 维度保存到 `works` 表，并将导出图预览上传到 `lcg-previews`（雏形阶段策略较宽松，正式前请收紧 RLS）。

## 功能概览（本雏形）
- 首页：场景分类、关键词搜索、推荐模板、空白画布
- 模板列表：按场景/关键词筛选，点击进入编辑
- 编辑器：
  - 画布：按模板尺寸缩放展示
  - 元素：添加“文字/矩形”，拖拽定位
  - 属性：颜色选择、文字大小、矩形宽高
  - 背景：快速切换背景色
  - 导出：渲染至 `canvas` 并生成图片，支持保存/分享
- 我的：草稿箱（自动保存最近编辑）、关于
- 新手引导：三步指引

## 目录结构
- `app.json/js/wxss`：全局配置与样式
- `pages/*`：页面（index/templates/editor/export/profile/onboarding）
- `mock/`：Mock 场景与模板
- `utils/`：通用工具（ID、存储、绘制）
- `services/`：Supabase 轻量请求封装
- `db/`：Supabase 建表与策略 SQL

## 与PRD的对齐与取舍
- 保留：P0 的核心链路（场景→模板→编辑→导出/分享）
- 简化：
  - 图片上传/滤镜/抠图：二期接入（留出接口）
  - PDF/透明PNG导出：先提供 JPG 导出
  - 会员与支付：占位到“我的”，后续接入
  - 模板库：使用少量Mock模板覆盖社交/电商两个典型场景
- 新增：
  - 本地草稿自动保存与打开（便于频繁试错）
  - 颜色快捷面板，保障非专业用户可快速出图
  - 撤销/重做、图层前后移动、对齐线吸附、图片元素（选择图片并缩放）、云端作品保存（可选）

## 下一步建议（按优先级）
1) 编辑器增强：撤销/重做、层级管理、元素锁定/对齐线
2) 图片链路：上传、裁剪、滤镜强度调节、透明PNG导出
3) 模板系统：模板分发与增量更新、会员模板鉴权
4) 数据：作品/模板结构落库；小程序云开发或独立后端
5) 付费：会员（字体/模板/无水印）、单次解锁、订单/对账
6) 合规：素材版权清单、隐私合规弹窗与政策文件

## 已知限制
- 仅支持文字与矩形元素；文本宽度为估算值，复杂排版未实现
- 导出基于旧版 `canvas` API，建议后续切换 2D Canvas 提升性能
- 草稿“打开”基于本地存储，未做跨端同步

---
如需我继续实现图片上传、撤销重做、会员体系等模块，请告诉我优先级。
