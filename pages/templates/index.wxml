<view class="container">
  <!-- é¡¶éƒ¨æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
  <view class="search-section">
    <view class="search-container">
      <!-- æœç´¢æ¡† -->
      <view class="search-input-wrapper">
        <text class="search-icon">ğŸ”</text>
        <input 
          class="search-input" 
          placeholder="æœç´¢æ¨¡æ¿ï¼Œå¦‚ï¼šæµ·æŠ¥ã€ç¤¾äº¤åª’ä½“ã€ç”µå•†ä¸»å›¾â€¦" 
          value="{{searchKeyword}}" 
          bindinput="onSearchInput" 
          bindconfirm="onSearchConfirm"
        />
        <button class="clear-btn" wx:if="{{searchKeyword}}" bindtap="clearSearch">Ã—</button>
      </view>
      
      <!-- å¿«æ·ç­›é€‰æ ‡ç­¾ -->
      <view class="quick-filters">
        <scroll-view class="filters-scroll" scroll-x="true" scroll-with-animation>
          <view class="filters-list">
            <view 
              class="filter-tag {{item.active ? 'active' : ''}}" 
              wx:for="{{quickFilters}}" 
              wx:key="id"
              bindtap="toggleFilter"
              data-filter="{{item}}"
            >
              <text class="filter-icon">{{item.icon}}</text>
              <text class="filter-text">{{item.name}}</text>
            </view>
          </view>
        </scroll-view>
      </view>
    </view>
  </view>

  <!-- é«˜çº§ç­›é€‰é¢æ¿ -->
  <view class="filter-panel {{showFilterPanel ? 'show' : ''}}">
    <view class="filter-header">
      <text class="filter-title">ç­›é€‰æ¨¡æ¿</text>
      <button class="close-filter" bindtap="toggleFilterPanel">Ã—</button>
    </view>
    
    <view class="filter-content">
      <!-- åˆ†ç±»ç­›é€‰ -->
      <view class="filter-group">
        <text class="group-title">æ¨¡æ¿ç±»å‹</text>
        <view class="category-grid">
          <view 
            class="category-item {{item.active ? 'active' : ''}}" 
            wx:for="{{categories}}" 
            wx:key="id"
            bindtap="toggleCategory"
            data-category="{{item}}"
          >
            <text class="category-icon">{{item.icon}}</text>
            <text class="category-name">{{item.name}}</text>
          </view>
        </view>
      </view>
      
      <!-- ç”¨é€”ç­›é€‰ -->
      <view class="filter-group">
        <text class="group-title">ä½¿ç”¨åœºæ™¯</text>
        <view class="usage-grid">
          <view 
            class="usage-item {{item.active ? 'active' : ''}}" 
            wx:for="{{usages}}" 
            wx:key="id"
            bindtap="toggleUsage"
            data-usage="{{item}}"
          >
            <text class="usage-text">{{item.name}}</text>
          </view>
        </view>
      </view>
      
      <!-- æ’åºæ–¹å¼ -->
      <view class="filter-group">
        <text class="group-title">æ’åºæ–¹å¼</text>
        <view class="sort-options">
          <view 
            class="sort-option {{item.active ? 'active' : ''}}" 
            wx:for="{{sortOptions}}" 
            wx:key="id"
            bindtap="changeSort"
            data-sort="{{item}}"
          >
            <text class="sort-text">{{item.name}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="filter-actions">
      <button class="reset-btn" bindtap="resetFilters">é‡ç½®</button>
      <button class="apply-btn" bindtap="applyFilters">åº”ç”¨ç­›é€‰</button>
    </view>
  </view>

  <!-- çƒ­é—¨æ¨èä¸“åŒº -->
  <view class="featured-section" wx:if="{{featuredTemplates.length}}">
    <view class="section-header">
      <view class="section-title">
        <text class="title-text">ğŸ”¥ çƒ­é—¨æ¨è</text>
        <text class="title-badge">ç²¾é€‰</text>
      </view>
      <view class="section-more" bindtap="viewAllFeatured">
        <text class="more-text">æŸ¥çœ‹å…¨éƒ¨</text>
        <text class="more-icon">â€º</text>
      </view>
    </view>
    
    <scroll-view class="featured-scroll" scroll-x="true" scroll-with-animation>
      <view class="featured-list">
        <view 
          class="featured-item" 
          wx:for="{{featuredTemplates}}" 
          wx:key="id"
          bindtap="previewTemplate"
          data-template="{{item}}"
        >
          <view class="featured-badge">æ¨è</view>
          <view class="featured-image">
            <image class="template-img" src="{{item.thumbnail}}" mode="aspectFill" />
            <view class="image-overlay">
              <text class="use-count">{{item.useCount}} æ¬¡ä½¿ç”¨</text>
            </view>
          </view>
          <view class="featured-info">
            <text class="template-name">{{item.name}}</text>
            <text class="template-desc">{{item.description}}</text>
            <view class="template-stats">
              <text class="stat-item">â­ {{item.rating}}</text>
              <text class="stat-item">{{item.category}}</text>
            </view>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ¨¡æ¿å±•ç¤ºåŒºåŸŸ -->
  <view class="templates-section">
    <view class="section-header">
      <view class="section-title">
        <text class="title-text">ğŸ“‹ å…¨éƒ¨æ¨¡æ¿</text>
        <text class="title-count">({{totalCount}})</text>
      </view>
      
      <!-- è§†å›¾åˆ‡æ¢ -->
      <view class="view-toggle">
        <text 
          class="view-option {{viewMode === 'grid' ? 'active' : ''}}" 
          bindtap="switchViewMode" 
          data-mode="grid"
        >ç½‘æ ¼</text>
        <text 
          class="view-option {{viewMode === 'list' ? 'active' : ''}}" 
          bindtap="switchViewMode" 
          data-mode="list"
        >åˆ—è¡¨</text>
      </view>
    </view>

    <!-- ç½‘æ ¼è§†å›¾ -->
    <view class="templates-grid" wx:if="{{viewMode === 'grid'}}">
      <view 
        class="template-card" 
        wx:for="{{templates}}" 
        wx:key="id"
        bindtap="previewTemplate"
        data-template="{{item}}"
      >
        <view class="card-image">
          <image class="template-img" src="{{item.thumbnail}}" mode="aspectFill" />
          <view class="card-overlay">
            <text class="use-btn">ä½¿ç”¨</text>
          </view>
        </view>
        <view class="card-info">
          <text class="template-name">{{item.name}}</text>
          <text class="template-category">{{item.category}}</text>
          <view class="template-stats">
            <text class="stat-item">â­ {{item.rating}}</text>
            <text class="stat-item">ğŸ‘ {{item.views}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åˆ—è¡¨è§†å›¾ -->
    <view class="templates-list" wx:elif="{{viewMode === 'list'}}">
      <view 
        class="template-item" 
        wx:for="{{templates}}" 
        wx:key="id"
        bindtap="previewTemplate"
        data-template="{{item}}"
      >
        <view class="item-image">
          <image class="template-img" src="{{item.thumbnail}}" mode="aspectFill" />
        </view>
        <view class="item-info">
          <text class="template-name">{{item.name}}</text>
          <text class="template-desc">{{item.description}}</text>
          <view class="item-stats">
            <text class="stat-item">â­ {{item.rating}}</text>
            <text class="stat-item">ğŸ‘ {{item.views}}</text>
            <text class="stat-item">ğŸ“ {{item.size}}</text>
          </view>
        </view>
        <view class="item-action">
          <text class="use-btn">ä½¿ç”¨</text>
        </view>
      </view>
    </view>
    
    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{hasMore}}">
      <button class="load-btn" bindtap="loadMore">åŠ è½½æ›´å¤š</button>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!templates.length && !isLoading}}">
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— æ¨¡æ¿æ•°æ®</text>
      <text class="empty-desc">å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…³é”®è¯</text>
      <button class="empty-btn" bindtap="resetFilters">é‡ç½®ç­›é€‰</button>
    </view>
  </view>

  <!-- ç­›é€‰æŒ‰é’® -->
  <view class="floating-actions">
    <button class="filter-btn" bindtap="toggleFilterPanel">
      <text class="filter-icon">ğŸ›ï¸</text>
      <text class="filter-text">ç­›é€‰</text>
    </button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <text class="loading-icon">â³</text>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>